generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id            String    @id @default(uuid())
  name          String
  email         String    @unique
  password      String
  role          UserRole  @default(USER)
  isHost        Boolean   @default(false)
  gender        Gender    @default(MALE)
  dob           DateTime?
  address       String?
  contactNumber String?
  bio           String?
  profileImage  String?
  status        Status    @default(ACTIVE)
  isDeleted     Boolean   @default(false)
  isVerified    Boolean   @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  hosts Host?

  @@map("users")
}

model Host {
  id                String @id @default(uuid())
  userId            String @unique
  user              User   @relation(fields: [userId], references: [id])
  rating            Float  @default(0)
  totalEventsHosted Int    @default(0)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  events Event[]

  @@map("hosts")
}

enum UserRole {
  SUPER_ADMIN
  ADMIN
  USER
  HOST
}

enum Gender {
  MALE
  FEMALE
}

enum Status {
  ACTIVE
  INACTIVE
  BLOCKED
}

model Event {
  id String @id @default(uuid())

  title           String
  slug            String      @unique
  category        String
  description     String
  date            DateTime
  time            String // will store: "10:00 AM"
  location        String
  minParticipants Int
  maxParticipants Int
  fee             Float       @default(0)
  images           String[]
  status          EventStatus @default(OPEN)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  host      Host?    @relation(fields: [hostId], references: [id])
  hostId    String?

  @@map("events")
}

enum EventStatus {
  OPEN
  FULL
  CANCELLED
  COMPLETED
}
